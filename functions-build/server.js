!function(e,t){for(var r in t)e[r]=t[r]}(exports,function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t){e.exports={COMMON_CONSTANTS:{TMDB_CONFIG:{API_URL:"https://api.themoviedb.org/",DEFAULT_VERSION:"3",VERSION_3:"3",VERSION_4:"4",ACCESS_TOKEN:"eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI3NmQ1NzdmMjM3Yjc3MjNkMjM0MDUzZTZiYjRkY2YzMCIsInN1YiI6IjU4YzNiNjk0YzNhMzY4MWFjMTAwMGYxNSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ._kDwHzUpUrpaj3rRcYsDsUcOo4W0Jl0ijKtIk8bUUMY",API_AUTH_KEY:"76d577f237b7723d234053e6bb4dcf30"},MEDIA_TYPE:{MOVIE:"movie",TV:"tv",PERSON:"person"},APPEND_TO_URL:{movie:"append_to_response=videos,credits,images,external_ids,content_ratings,release_dates,recommendations&include_image_language=en",tv:"append_to_response=videos,credits,images,external_ids,content_ratings,release_dates,recommendations&include_image_language=en",person:"append_to_response=images,combined_credits,external_ids&include_image_language=en"}},CONFIG:{isAppendToResponse:!0}}},function(e,t,r){const i=r(4)(r(5)());t.handler=i},function(e,t){e.exports=class{constructor(e){this.adult=e.adult,this.backdropPath=e.backdrop_path,this.genres=e.genres,this.homepage=e.homepage,this.id=e.id,this.originalLanguage=e.original_language,this.overview=e.overview,this.popularity=e.popularity,this.posterPath=e.poster_path,this.productionCompanies=e.production_companies,this.productionCountries=e.production_countries,this.spokenLanguages=e.spoken_languages,this.tagline=e.tagline,this.status=e.status,this.voteAverage=e.vote_average,this.voteCount=e.vote_count}getAllImages(e){const t=e.backdrops.map(e=>({url:e.file_path})),r=e.posters.map(e=>({url:e.file_path}));this.images={backdrops:t,posters:r}}}},function(e,t,r){"use strict";r.r(t);var i=r(1);r.d(t,"handler",(function(){return i.handler}))},function(e,t){e.exports=require("@fastify/aws-lambda")},function(e,t,r){(function(e){var t;r(7).config();const i=process.env.ENVIRONMENT,n=r(8)({logger:null===(t={development:{transport:{target:"pino-pretty",options:{translateTime:"HH:MM:ss Z",ignore:"pid,hostname"}}},production:!0,test:!1}[i])||void 0===t||t}),o=process.env.PORT,s=r(9);n.register(r(22)),n.register(s,{prefix:"/v1"});const a=()=>{n.listen({port:o},(e,t)=>{e&&(n.log.error(e),process.exit(1)),n.log.info("Server ready at: "+t)})};r.c[r.s]===e?a():e.exports=a}).call(this,r(6)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=require("dotenv")},function(e,t){e.exports=require("fastify")},function(e,t,r){const i=r(10),n=r(11);e.exports=async e=>{e.register(i,{prefix:"/first"}),e.register(n,{prefix:"/media"})}},function(e,t){e.exports=async e=>{e.get("/",{},(e,t)=>{t.send({hello:"world"})})}},function(e,t,r){const{getMediaByIdHandler:i}=r(12),{getMediaByIdSchema:n}=r(21);e.exports=async function(e){e.route({method:"POST",url:"/:id",schema:n,handler:i})}},function(e,t,r){function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const{getMediaByIdService:s}=r(13);t.getMediaByIdHandler=async function(e,t){e.log.info("Inside Get Media Handler");const r=await s(e);t.send({status:"OK",data:n({},r)})}},function(e,t,r){const{getMediaByIdRepository:i}=r(14),n=r(17);t.getMediaByIdService=async function(e){const{mediaType:t}=e.body,r=await i(e);return(new n).createMedia(t,r)}},function(e,t,r){const i=r(15),{populateRequestUrl:n,getRequestOptions:o}=r(16);t.getMediaByIdRepository=async function(e){const{mediaType:t}=e.body,{id:r}=e.params,s=n(`/${t}/${r}`,t),a=o();e.log.info("Calling URL: "+s);const c=await i(s,a);return await c.json()}},function(e,t){e.exports=require("node-fetch")},function(e,t,r){function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const{COMMON_CONSTANTS:s,CONFIG:a}=r(0);t.populateRequestUrl=function(e,t,r=s.TMDB_CONFIG.DEFAULT_VERSION){return a.isAppendToResponse?`${s.TMDB_CONFIG.API_URL}${r}${e}?${s.APPEND_TO_URL[t]}`:`${s.TMDB_CONFIG.API_URL}${r}${e}`},t.getRequestOptions=function(e){const t=n(n({},e),{},{accept:"application/json",Authorization:"Bearer "+s.TMDB_CONFIG.ACCESS_TOKEN});return{headers:n({},t)}}},function(e,t,r){const{COMMON_CONSTANTS:i}=r(0),n=r(18),o=r(19),s=r(20),a={[i.MEDIA_TYPE.MOVIE]:n,[i.MEDIA_TYPE.TV]:s,[i.MEDIA_TYPE.PERSON]:o};e.exports=class{createMedia(e,t){const r=new(0,a[e])(t);return r.getAllImages(t.images),r}}},function(e,t,r){const i=r(2);e.exports=class extends i{constructor(e,t){super(e),this.mediaType=t,this.belongsToCollection=e.belongs_to_collection,this.budget=e.budget,this.imdbId=e.imdb_id,this.originalLanguage=e.original_language,this.originalTitle=e.original_title,this.releaseDate=e.release_date,this.revenue=e.revenue,this.runtime=e.runtime,this.title=e.title,this.video=e.video}}},function(e,t){e.exports=class{constructor(e){this.adult=e.adult,this.biography=e.biography,this.birthday=e.birthday,this.deathday=e.deathday,this.id=e.id,this.gender=e.gender,this.homepage=e.homepage,this.popularity=e.popularity,this.posterPath=e.profile_path,this.imdbId=e.imdb_id,this.name=e.name,this.placeOfBirth=e.place_of_birth}getAllImages(e){const t=e.profiles.map(e=>({url:e.file_path}));this.images=t}}},function(e,t,r){const i=r(2);e.exports=class extends i{constructor(e,t){super(e),this.mediaType=t,this.lastAirDate=e.last_air_date,this.lastEpisodeToAir=e.last_episode_to_air,this.title=e.name,this.nextEpisodeToAir=e.next_episode_to_air,this.networks=e.networks,this.numberOfEpisodes=e.number_of_episodes,this.numberOfSeasons=e.number_of_seasons,this.originCountry=e.origin_country,this.originalTitle=e.original_name,this.createdBy=e.created_by,this.episodeRunTime=e.episode_run_time,this.firstAirDate=e.first_air_date,this.inProduction=e.in_production,this.seasons=e.seasons,this.type=e.type,this.languages=e.languages}}},function(e,t,r){const{COMMON_CONSTANTS:i}=r(0);t.getMediaByIdSchema={querystring:{type:"object",properties:{},additionalProperties:!1},body:{type:"object",required:["mediaType"],properties:{mediaType:{enum:Object.values(i.MEDIA_TYPE),description:"Media Type can be either Person, Tv or Movie"}}}}},function(e,t){e.exports=require("@fastify/routes")}]));